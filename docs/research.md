## Парсинг

Чтобы извлечь информацию из .fdb, необходимо написать парсер, который пройдет по
описанной структуре. Основные шаги:

### Чтение файла

- открыть файл и прочитать его содержимое как текст (с учётом кодировки).

Можно ориентироваться на теги <T_head>, <T_id>, <T_title>, <T_body> для
разделения на части.

### Парсинг структуры

извлечь список ID вопросов из блока <T_id> и подготовиться итерироваться по
каждому блоку вопроса в <T_body>. Каждый вопрос находится между тегами <номер> и
</номер>.

### Декодирование содержания вопроса

содержимое между <i> и </i> для каждого вопроса представлено в виде строки
шестнадцатеричных символов. Эту строку нужно конвертировать обратно в байты.
После конвертации получаются либо текстовые данные (теги и тексты
вопроса/ответов), либо бинарные (изображения).

### Извлечение текста

байтовый контент вопроса содержит XML-подобные теги. Их можно распознать с
помощью регулярных выражений или XML-парсера после декодирования. Например,
извлечь текст между <question>...</question> (формулировка вопроса), собрать
варианты ответа из <a_1>...</a_1> и далее. Если поле description не пустое,
также сохранить его (это может быть объяснение ответа).

### Извлечение изображений

если внутри вопроса встречаются бинарные данные, их можно выявить по сигнатурам.
В нашем случае изображения BMP имеют начало BM (0x42 0x4D в ASCII) в бинарном
потоке. Нужно вычленить последовательность байт, соответствующую изображению, и
сохранить в файл. Например, можно определить длину BMP из заголовка файла
(размер файла хранится в байтах 2–5 заголовка BMP) и вырезать соответствующие
байты в отдельный .bmp файл. Аналогично поступить с другими форматами (PNG, JPG)
– по их сигнатурам и длинам или до конца соответствующего тега, если изображения
также обрамлены тегами.

### Формирование структуры данных

в результате парсинга для каждого вопроса получаем объект с полями:

- id,
- text (текст вопроса)
- список answers (каждый ответ – текст и, возможно, признак правильности)
- а также, например, images (список прикрепленных изображений, если есть, либо
  ссылки на сохранённые файлы). Признаки правильных ответов можно определить на
  основе полей options и value (например, у вопроса 0 из 10 вариантов 4
  правильных – эти детали сохраняем, чтобы использовать при проверке ответов).

После извлечения можно проверить корректность: количество полученных вопросов
должно совпадать с maxCount (1084) из заголовка.

Все тексты вопросов и ответов должны читаться на русском (нужно учитывать
кодировку – судя по содержимому, использовалась Windows-1251 или UTF-8).

Изображения следует открыть, чтобы убедиться, что они сохранились правильно.
